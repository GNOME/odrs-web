<VirtualHost *:8443>
    ServerName  odrs-dev.gnome.org 
    DocumentRoot /opt/app-root/src

    SSLEngine on
    SSLProtocol All -SSLv2 -SSLv3
    SSLCertificateFile /var/serving-cert/tls.crt
    SSLCertificateKeyFile /var/serving-cert/tls.key

    Alias /static/ /opt/app-root/src/odrs/static
    Alias /1.0/reviews/api/ratings /opt/app-root/src/odrs/static/ratings.json

    WSGIDaemonProcess odrs.gnome.org processes=10 threads=15 maximum-requests=100
    WSGIProcessGroup odrs.gnome.org

    WSGIScriptAlias / /opt/app-root/src/wsgi-scripts/odrs.wsgi
    WSGIPythonPath /usr/lib/python3.6/site-packages:/usr/lib64/python3.6/site-packages

    SetEnv ODRS_REVIEWS_SECRET replace_odrs_secret
    SetEnv MYSQL_DB_USERNAME replace_odrs_username
    SetEnv MYSQL_DB_PASSWORD replace_odrs_password
    SetEnv MYSQL_DB_HOST replace_odrs_host

    <Location /static/>
        ExpiresActive On
        ExpiresByType image/png "access plus 1 week"
        ExpiresByType application/javascript "access plus 1 week"
        ExpiresByType text/javascript "access plus 1 week"
        ExpiresByType text/css "access plus 1 day"
        Header set Cache-Control "public"
    </Location>
</VirtualHost>

<Directory "/opt/app-root/src/odrs/static">
  AllowOverride None

  Require all granted
</Directory>

<Directory "/opt/app-root/src/wsgi-scripts">
  Require all granted
</Directory>
