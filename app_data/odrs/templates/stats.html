{% extends "default.html" %}
{% block title %}Statistics{% endblock %}

{% block content %}

<h2>Web Service Statistics</h2>
<table class="table table-hover table-responsive">
{% for key in results_stats %}
  <tr>
    <td>{{key}}</td>
    <td>{{results_stats[key]}}</td>
  </tr>
{% endfor %}
</table>

<h2>Popularity By Page View</h2>
<ol>
{% for name, cnt in results_viewed %}
  <li>{{name.replace('.desktop', '')}} ({{cnt}})</li>
{% endfor %}
</ol>

<h2>Popularity By Submitted Reviews</h2>
<ol>
{% for name, cnt in results_submitted %}
  <li>{{name.replace('.desktop', '')}} (<a href="{{url_for('.admin_show_app', app_id=name)}}">{{cnt}}</a>)</li>
{% endfor %}
</ol>

<h2>Most Awesome Users</h2>
<table class="table table-hover table-responsive">
  <tr>
    <th>User</th>
    <th>Karma</th>
    <th>Hash</th>
    <th>Created</th>
    <th>Banned</th>
  </tr>
{% for u in users_awesome %}
  <tr>
    <td>{{u.id}}</td>
    <td>{{u.karma}}</td>
    <td>
{% if current_user.is_authenticated %}
      <a href="{{url_for('.admin_show_user', user_hash=u.user_hash)}}">
        <code>{{u.user_hash}}</code>
      </a>
{% else %}
      <code>{{u.user_hash}}</code>
{% endif %}
    </td>
    <td>{{u.date_created}}</td>
    <td>{{u.is_banned}}</td>
  </tr>
{% endfor %}
</table>

<h2>Haters Gonna Hate</h2>
<table class="table table-hover table-responsive">
  <tr>
    <th>User</th>
    <th>Karma</th>
    <th>Hash</th>
    <th>Created</th>
    <th>Banned</th>
  </tr>
{% for u in users_haters %}
  <tr>
    <td>{{u.id}}</td>
    <td>{{u.karma}}</td>
    <td>
{% if current_user.is_authenticated %}
      <a href="{{url_for('.admin_show_user', user_hash=u.user_hash)}}">
        <code>{{u.user_hash}}</code>
      </a>
{% else %}
      <code>{{u.user_hash}}</code>
{% endif %}
    </td>
    <td>{{u.date_created}}</td>
    <td>{{u.is_banned}}</td>
  </tr>
{% endfor %}
</table>

{% endblock %}
